<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Intel</title>
<link type="text/css" rel="stylesheet" href="resource/css/style.css" />
</head>
<body>

<div id="main">
<img id="g_bg" src="resource/images/bg1920.jpg" />

<img id="b_sushe" src="resource/images/sushe.png" />
<img id="b_lake" src="resource/images/lake.png" />
<img id="b_sport" src="resource/images/sport.png" />
<img id="b_library" src="resource/images/library.png" />
<img id="b_jiaoxuelou" src="resource/images/jiaoxuelou.png" />
<img id="b_announce" src="resource/images/announce.png" />
<img id="b_wellandtree" src="resource/images/wellandtree.png" />
<img id="b_yushi" src="resource/images/yushi.png" />
<img id="b_shitang" src="resource/images/shitang.png" />
<img id="b_xiaomaipu" src="resource/images/xiaomaipu.png" />

<img id="menu" src="resource/images/menu.png" />
<img id="userinfo" src="resource/images/userinfo.png" />
<img id="logo" src="resource/images/logo.png" />
<div class="bubble">
	<img src="resource/images/bubble.png" />
	<span>999+</span>
</div>

<div class="bubble small">
	<img src="resource/images/bubble.png" />
	<span>1</span>
</div>


<div id="school">中国海洋大学</div>

<canvas id="subline" width="1920" height="1080"></canvas>
</div>
<script src="resource/js/jquery-1.9.1.min.js"></script>
<script src="resource/js/vector.js"></script>
<script src="resource/js/event-manager.js"></script>
<script>
/**
 * bubble 尺寸与字体大小的比例 0.3072
 */

//公告牌
//var p = new Polygon([[142, 385], [142, 460], [254, 400], [254, 327]]);
//[[274, 281], [274, 412], [450, 500], [690, 367], [690, 224], [530, 140]]
//宿舍楼
//var p2 = new Polygon([[274, 281], [274, 412], [450, 500], [690, 367], [690, 224], [530, 140]]);
//树井
//[0,501], [46, 609], [181, 629], [185, 500], [115, 448]
//var p3 = new Polygon([[0,501], [46, 609], [181, 629], [185, 500], [115, 448]]);
//浴室
//[342, 553], [189, 660], [191, 722], [259, 756], [393, 761], [484, 732], [477, 650], [457, 612]
//餐厅
//[499, 709], [449, 835], [593, 908], [765, 820], [620, 650]
//小卖铺
//[892, 807], [756, 872], [760, 1000], [900, 1056], [1033, 1000], [1037, 874]
//教学楼
//[916, 656], [916, 780], [1104, 878], [1420, 697], [1420, 577], [1230,475]
//图书馆
//[553, 466],[532 519], [530, 632], [677, 702 ], [1042, 510], [1039, 417], [1006, 318], [867 ,306]
//湖泊
//[926, 330] ,[1085, 423], [1357, 282], [1179, 189]
//体育馆
//[1034, 407], [1381, 498], [1482, 548], [1723, 414], [1414, 226]

var buildingsCoordinates = [
	//公告牌
	[[142, 385], [142, 460], [254, 400], [254, 327]],
	//宿舍楼
	[[274, 281], [274, 412], [450, 500], [690, 367], [690, 224], [530, 140]],
	//树和井
	[[0,501], [46, 609], [181, 629], [185, 500], [115, 448]],
	//浴室
	[[342, 553], [189, 660], [191, 722], [259, 756], [393, 761], [484, 732], [477, 650], [457, 612]],
	//餐厅
	[[499, 709], [449, 835], [593, 908], [765, 820], [620, 650]],
	//小卖铺
	[[892, 807], [756, 872], [760, 1000], [900, 1056], [1033, 1000], [1037, 874]],
	//教学楼
	[[916, 656], [916, 780], [1104, 878], [1420, 697], [1420, 577], [1230,475]],
	//图书馆
	[[553, 466],[532, 519], [530, 632], [677, 702 ], [1042, 510], [1039, 417], [867 ,306]],
	//湖泊
	[[926, 330] ,[1085, 423], [1357, 282], [1179, 189]],
	//体育馆
	[[1296, 407], [1381, 498], [1482, 548], [1723, 414], [1414, 226]]
];
var ps = [];
for(var i= 0, len = buildingsCoordinates.length; i < len; i++){
	ps.push(new Polygon(buildingsCoordinates[i]));
}

MouseEventManager.init('#main');

MouseEventManager.add('mouseover', ps[0], function(){
	var src = $('#b_announce').attr('src');
	src = src.replace('announce.png', 'announce_hover.png');
	$('#b_announce').attr('src', src);
});
MouseEventManager.add('mouseout', ps[0], function(){
	var src = $('#b_announce').attr('src');
	src = src.replace('announce_hover.png', 'announce.png');
	$('#b_announce').attr('src', src);
});

MouseEventManager.add('mouseover', ps[1], function(){
	var src = $('#b_sushe').attr('src');
	src = src.replace('sushe.png', 'sushe_hover.png');
	$('#b_sushe').attr('src', src);
});
MouseEventManager.add('mouseout', ps[1], function(){
	var src = $('#b_sushe').attr('src');
	src = src.replace('sushe_hover.png', 'sushe.png');
	$('#b_sushe').attr('src', src);
});


$(window).resize(function(e){
	resizeBuildingsRegion();
});
//var context = document.getElementById('subline').getContext('2d');
var resizeBuildingsRegion = function(){
	//context.clearRect(0, 0, 1920, 1080);
	var percent = $('#main').width() / 1920;
	$('body').css('font-size', $('#main').width() + 'px');
	for(var i = 0, len = ps.length; i< len; i++){
		ps[i].resize(percent);
		//ps[i].draw(context);
	}
};

resizeBuildingsRegion();

var Bubble = function(){
	
};

</script>
</body>
</html>